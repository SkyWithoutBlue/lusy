# üéâ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è - –ì–û–¢–û–í!

## ‚ú® –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ email —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **nodemailer**.

### üì¶ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã:

```bash
‚úÖ nodemailer
‚úÖ @types/nodemailer
```

### üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

#### Backend (6 —Ñ–∞–π–ª–æ–≤):

```
‚úÖ src/lib/email.ts                              # Email —É—Ç–∏–ª–∏—Ç—ã –∏ —à–∞–±–ª–æ–Ω—ã
‚úÖ src/app/api/auth/forgot-password/route.ts     # API: –∑–∞–ø—Ä–æ—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
‚úÖ src/app/api/auth/reset-password/route.ts      # API: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–æ–ª—è
‚úÖ prisma/schema.prisma                          # –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å User
```

#### Frontend (3 —Ñ–∞–π–ª–∞):

```
‚úÖ src/app/auth/forgot-password/page.tsx         # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–ø—Ä–æ—Å–∞
‚úÖ src/app/auth/reset-password/page.tsx          # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–±—Ä–æ—Å–∞
‚úÖ src/components/forms/LoginForm.tsx            # –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞
```

#### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (7 —Ñ–∞–π–ª–æ–≤):

```
‚úÖ CHECKLIST.md                      # ‚Üê –ù–ê–ß–ù–ò–¢–ï –û–¢–°–Æ–î–ê! –ß–µ–∫–ª–∏—Å—Ç –∑–∞–ø—É—Å–∫–∞
‚úÖ QUICK_START_PASSWORD_RESET.md     # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)
‚úÖ PASSWORD_RESET_README.md          # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚úÖ PASSWORD_RESET_FLOW.md            # –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã
‚úÖ EMAIL_SETUP.md                    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ email –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚úÖ SUMMARY_PASSWORD_RESET.md         # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–≤–æ–¥–∫–∞
‚úÖ MIGRATION_COMMANDS.sh             # –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
```

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ (5 –º–∏–Ω—É—Ç)

### 1. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
EMAIL_HOST="smtp.gmail.com"
EMAIL_PORT="587"
EMAIL_SECURE="false"
EMAIL_USER="–≤–∞—à-email@gmail.com"
EMAIL_PASSWORD="–≤–∞—à-app-password"
EMAIL_FROM="–≤–∞—à-email@gmail.com"
EMAIL_FROM_NAME="Lusy Fitness"
```

### 2. –ü–æ–ª—É—á–∏—Ç–µ Gmail App Password:

1. https://myaccount.google.com/security
2. –í–∫–ª—é—á–∏—Ç–µ "2-Step Verification"
3. –°–æ–∑–¥–∞–π—Ç–µ "App password" –¥–ª—è Mail
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª—å –≤ `EMAIL_PASSWORD`

### 3. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:

```bash
npx prisma migrate dev --name add_password_reset_fields
```

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
npm run dev
```

### 5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:

-   –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000/auth/signin
-   –ö–ª–∏–∫–Ω–∏—Ç–µ "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?"
-   –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º

---

## üé® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚ú® UX/UI:

-   üíé –ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω —Å—Ç—Ä–∞–Ω–∏—Ü –≤ —Å—Ç–∏–ª–µ –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞
-   üì± –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π (mobile + desktop)
-   üéØ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
-   üí™ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
-   üëÅÔ∏è –ü–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ –ø–∞—Ä–æ–ª—è
-   ‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞

### üìß Email:

-   üé® –ö—Ä–∞—Å–∏–≤—ã–µ HTML —à–∞–±–ª–æ–Ω—ã
-   üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –ø–∏—Å–µ–º
-   üé® –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã –∏ –±—Ä–µ–Ω–¥–∏–Ω–≥ "Lusy Fitness"
-   üìù –¢–µ–∫—Å—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
-   üîó –ö–Ω–æ–ø–∫–∞ + —Å—Å—ã–ª–∫–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

-   ‚úÖ –¢–æ–∫–µ–Ω—ã —Ö–µ—à–∏—Ä—É—é—Ç—Å—è SHA-256
-   ‚úÖ –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 1 —á–∞—Å
-   ‚úÖ –¢–æ–∫–µ–Ω—ã –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ
-   ‚úÖ –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è bcrypt (12 —Ä–∞—É–Ω–¥–æ–≤)
-   ‚úÖ API –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ email
-   ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö

---

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ URL

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

| URL                              | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
| -------------------------------- | ------------------------------------------- |
| `/auth/signin`                   | –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ (—Å —Å—Å—ã–ª–∫–æ–π "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?") |
| `/auth/forgot-password`          | –ó–∞–ø—Ä–æ—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è                |
| `/auth/reset-password?token=xxx` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è                     |

## üîå API Endpoints

| Endpoint                    | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ                     |
| --------------------------- | ----- | ---------------------------- |
| `/api/auth/forgot-password` | POST  | –ó–∞–ø—Ä–æ—Å —Ç–æ–∫–µ–Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è |
| `/api/auth/reset-password`  | POST  | –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è —Å –Ω–æ–≤—ã–º         |

---

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?" ‚Üí –í–≤–æ–¥–∏—Ç email
2. –°–∏—Å—Ç–µ–º–∞ ‚Üí –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î
3. –°–∏—Å—Ç–µ–º–∞ ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫—Ä–∞—Å–∏–≤–æ–µ –ø–∏—Å—å–º–æ —Å —Å—Å—ã–ª–∫–æ–π
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –ö–ª–∏–∫–∞–µ—Ç —Å—Å—ã–ª–∫—É ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –í–≤–æ–¥–∏—Ç –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
6. –°–∏—Å—Ç–µ–º–∞ ‚Üí –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–∞—Ä–æ–ª—å ‚Üí –£–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω
7. –°–∏—Å—Ç–µ–º–∞ ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
8. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –≤—Ö–æ–¥
9. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –í—Ö–æ–¥–∏—Ç —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º ‚úÖ
```

–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞: —Å–º. `PASSWORD_RESET_FLOW.md`

---

## üí° –ë–æ–Ω—É—Å: Email-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞!

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å:

-   ‚úâÔ∏è –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–∏—Å—å–º–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
-   ‚úâÔ∏è Email-–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –∞–∫–∫–∞—É–Ω—Ç–∞
-   ‚úâÔ∏è –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–∫—É–ø–∫–∞—Ö
-   ‚úâÔ∏è –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö
-   ‚úâÔ∏è –†–∞—Å—Å—ã–ª–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –∞–∫—Ü–∏–π
-   ‚úâÔ∏è –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `sendEmail()` –∏–∑ `src/lib/email.ts`!

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–°–ï–ô–ß–ê–°):

1. ‚úÖ –û—Ç–∫—Ä—ã—Ç—å `CHECKLIST.md`
2. ‚úÖ –°–ª–µ–¥–æ–≤–∞—Ç—å —á–µ–∫–ª–∏—Å—Ç—É (–∑–∞–π–º–µ—Ç 5-10 –º–∏–Ω—É—Ç)
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –ü–µ—Ä–µ–¥ Production:

1. ‚ö†Ô∏è –ó–∞–º–µ–Ω–∏—Ç—å Gmail –Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å (SendGrid/Mailgun)
2. ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DKIM/SPF –¥–ª—è –¥–æ–º–µ–Ω–∞
3. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å rate limiting
4. ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ email

–°–º. –¥–µ—Ç–∞–ª–∏ –≤ `PASSWORD_RESET_README.md`

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –§–∞–π–ª                              | –î–ª—è –∫–æ–≥–æ               | –û–ø–∏—Å–∞–Ω–∏–µ                          |
| --------------------------------- | ---------------------- | --------------------------------- |
| **CHECKLIST.md**                  | üë§ –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ | –ß–µ–∫–ª–∏—Å—Ç: —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å |
| **QUICK_START_PASSWORD_RESET.md** | üë§ –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ | 5 –º–∏–Ω—É—Ç –¥–æ –∑–∞–ø—É—Å–∫–∞                |
| **PASSWORD_RESET_README.md**      | üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –í—Å–µ –¥–µ—Ç–∞–ª–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏            |
| **PASSWORD_RESET_FLOW.md**        | üîç –î–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è       | –°—Ö–µ–º—ã –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã —Ä–∞–±–æ—Ç—ã          |
| **EMAIL_SETUP.md**                | ‚öôÔ∏è –î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏       | Email –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è   |
| **SUMMARY_PASSWORD_RESET.md**     | üíª –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤   | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–≤–æ–¥–∫–∞                |
| **MIGRATION_COMMANDS.sh**         | üõ†Ô∏è –î–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏        | –°–∫—Ä–∏–ø—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î     |

---

## üéä –ì–æ—Ç–æ–≤–æ!

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è —Å:

-   ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
-   ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–º —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–æ–≤
-   ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ email-—à–∞–±–ª–æ–Ω–∞–º–∏
-   ‚úÖ –ü–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
-   ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å—é –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é

### üèÅ –ù–∞—á–Ω–∏—Ç–µ —Å:

```bash
# 1. –û—Ç–∫—Ä–æ–π—Ç–µ —á–µ–∫–ª–∏—Å—Ç
cat CHECKLIST.md

# –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–ª–µ–¥—É–π—Ç–µ –±—ã—Å—Ç—Ä–æ–º—É —Å—Ç–∞—Ä—Ç—É:
cat QUICK_START_PASSWORD_RESET.md
```

**–£–¥–∞—á–∏ —Å –≤–∞—à–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º Lusy Fitness! üöÄüí™**

---

## ‚ùì –í–æ–ø—Ä–æ—Å—ã?

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤—ã—à–µ. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É "–°–ø–∞–º" –≤ –ø–æ—á—Ç–µ
4. –°–º. —Ä–∞–∑–¥–µ–ª "Troubleshooting" –≤ `PASSWORD_RESET_README.md`
