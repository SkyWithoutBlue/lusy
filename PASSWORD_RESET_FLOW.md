# üîÑ –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è

## –ü—Ä–æ—Ü–µ—Å—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
                                 ‚îÇ 1. –ó–∞–±—ã–ª –ø–∞—Ä–æ–ª—å
                                 ‚ñº
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ   /auth/signin          ‚îÇ
                    ‚îÇ   (—Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞)         ‚îÇ
                    ‚îÇ   [–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?] ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
                                                   ‚îÇ –ö–ª–∏–∫
                                                   ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îê
                    ‚îÇ   /auth/forgot-password        ‚îÇ
                    ‚îÇ   (–∑–∞–ø—Ä–æ—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è)      ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îò
                                 ‚îÇ 2. –í–≤–æ–¥–∏—Ç email
                                 ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ   POST /api/auth/forgot-password              ‚îÇ
         ‚îÇ   ‚Ä¢ –ò—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email                ‚îÇ
         ‚îÇ   ‚Ä¢ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω (crypto.randomBytes)     ‚îÇ
         ‚îÇ   ‚Ä¢ –•–µ—à–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω (SHA-256)                  ‚îÇ
         ‚îÇ   ‚Ä¢ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î: resetToken, expiry        ‚îÇ
         ‚îÇ   ‚Ä¢ –°–æ–∑–¥–∞–µ—Ç —Å—Å—ã–ª–∫—É —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º     ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚îÇ 3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email
                            ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ   src/lib/email.ts                            ‚îÇ
         ‚îÇ   ‚Ä¢ sendEmail() —á–µ—Ä–µ–∑ nodemailer              ‚îÇ
         ‚îÇ   ‚Ä¢ HTML —à–∞–±–ª–æ–Ω —Å –∫—Ä–∞—Å–∏–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º           ‚îÇ
         ‚îÇ   ‚Ä¢ –°—Å—ã–ª–∫–∞: /auth/reset-password?token=xxx    ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚îÇ 4. Email –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
                            ‚ñº
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ   EMAIL –ö–õ–ò–ï–ù–¢          ‚îÇ
                    ‚îÇ   üìß –ü–∏—Å—å–º–æ –ø–æ–ª—É—á–µ–Ω–æ    ‚îÇ
                    ‚îÇ   [–°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å] ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
                                                   ‚îÇ 5. –ö–ª–∏–∫ –ø–æ —Å—Å—ã–ª–∫–µ
                                                   ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îê
                    ‚îÇ   /auth/reset-password         ‚îÇ
                    ‚îÇ   ?token=xxx                   ‚îÇ
                    ‚îÇ   (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è)    ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îò
                                 ‚îÇ 6. –í–≤–æ–¥–∏—Ç –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
                                 ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ   POST /api/auth/reset-password               ‚îÇ
         ‚îÇ   ‚Ä¢ –•–µ—à–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω (SHA-256)                  ‚îÇ
         ‚îÇ   ‚Ä¢ –ò—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–æ–∫–µ–Ω–æ–º               ‚îÇ
         ‚îÇ   ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è                   ‚îÇ
         ‚îÇ   ‚Ä¢ –•–µ—à–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (bcrypt)            ‚îÇ
         ‚îÇ   ‚Ä¢ –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–∞—Ä–æ–ª—å –≤ –ë–î                     ‚îÇ
         ‚îÇ   ‚Ä¢ –£–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –∏–∑ –ë–î                       ‚îÇ
         ‚îÇ   ‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–∞ email           ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚îÇ 7. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                            ‚ñº
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ   /auth/signin          ‚îÇ
                    ‚îÇ   –£—Å–ø–µ—Ö! –í–æ–π–¥–∏—Ç–µ        ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –í—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞

```
–í—Ä–µ–º—è                     –î–µ–π—Å—Ç–≤–∏–µ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
00:00:00   üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?" ‚Üí –≤–≤–æ–¥–∏—Ç email
00:00:01   üîê API: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–∫–µ–Ω
00:00:02   üìß Email: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∏—Å—å–º–æ
00:00:05   ‚úÖ Email –¥–æ—Å—Ç–∞–≤–ª–µ–Ω
...
00:15:30   üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç email, –∫–ª–∏–∫–∞–µ—Ç —Å—Å—ã–ª–∫—É
00:15:31   üåê –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è /auth/reset-password?token=xxx
00:15:45   üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –í–≤–æ–¥–∏—Ç –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
00:15:46   üîê API: –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–∞—Ä–æ–ª—å, —É–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω
00:15:47   üìß Email: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
00:15:48   ‚úÖ –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
...
01:00:01   ‚è∞ –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫–∞–µ—Ç (–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω)
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `users` (–æ–±–Ω–æ–≤–ª–µ–Ω–∞)

```sql
CREATE TABLE users (
  id                TEXT PRIMARY KEY,
  email             TEXT UNIQUE NOT NULL,
  name              TEXT,
  password          TEXT NOT NULL,
  role              TEXT DEFAULT 'user',
  resetToken        TEXT,              -- ‚Üê –ù–û–í–û–ï
  resetTokenExpiry  TIMESTAMP,         -- ‚Üê –ù–û–í–û–ï
  createdAt         TIMESTAMP DEFAULT NOW(),
  updatedAt         TIMESTAMP DEFAULT NOW()
);
```

### –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏:

```javascript
// –í –ë–î —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
{
  email: "user@example.com",
  resetToken: "e8f3c9a7b2d1f5e4...",  // SHA-256 —Ö–µ—à
  resetTokenExpiry: "2024-10-25T15:30:00Z"  // –ß–µ—Ä–µ–∑ 1 —á–∞—Å
}

// –í email –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω:
"http://localhost:3000/auth/reset-password?token=a1b2c3d4e5f6..."
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

```javascript
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è
const resetToken = crypto.randomBytes(32).toString("hex");
// ‚Üí "a1b2c3d4e5f6..."

// –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ë–î
const hashedToken = crypto
    .createHash("sha256")
    .update(resetToken)
    .digest("hex");
// ‚Üí "e8f3c9a7b2d1f5e4..."
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞

```javascript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–¥–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
// API —Ö–µ—à–∏—Ä—É–µ—Ç –µ–≥–æ –∏ –∏—â–µ—Ç –≤ –ë–î
const hashedToken = crypto.createHash("sha256").update(token).digest("hex");

const user = await prisma.user.findFirst({
    where: {
        resetToken: hashedToken,
        resetTokenExpiry: { gt: new Date() }, // –ù–µ –∏—Å—Ç–µ–∫
    },
});
```

### 3. –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è

```javascript
const hashedPassword = await bcrypt.hash(password, 12);
// 12 —Ä–∞—É–Ω–¥–æ–≤ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. –¢–æ–∫–µ–Ω —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
3. Email –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç —Å—Å—ã–ª–∫—É –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞
5. –¢–æ–∫–µ–Ω –≤–∞–ª–∏–¥–µ–Ω
6. –ü–∞—Ä–æ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω
7. –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ

### ‚ùå –û—à–∏–±–∫–∏:

| –û—à–∏–±–∫–∞               | –ü—Ä–∏—á–∏–Ω–∞                    | –†–µ—à–µ–Ω–∏–µ                |
| -------------------- | -------------------------- | ---------------------- |
| Email –Ω–µ –Ω–∞–π–¥–µ–Ω      | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç | –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é  |
| –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫          | –ü—Ä–æ—à–ª–æ > 1 —á–∞—Å–∞            | –ó–∞–ø—Ä–æ—Å–∏—Ç—å –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É |
| –¢–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω | –ù–µ–≤–µ—Ä–Ω–∞—è —Å—Å—ã–ª–∫–∞            | –ó–∞–ø—Ä–æ—Å–∏—Ç—å –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É |
| Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª—Å—è  | –ü—Ä–æ–±–ª–µ–º–∞ —Å SMTP            | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏    |
| –ü–∞—Ä–æ–ª—å —Å–ª–∞–±—ã–π        | < 6 —Å–∏–º–≤–æ–ª–æ–≤               | –í–≤–µ—Å—Ç–∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π   |

## API Endpoints

### POST /api/auth/forgot-password

**Request:**

```json
{
    "email": "user@example.com"
}
```

**Response (—É—Å–ø–µ—Ö):**

```json
{
    "message": "–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–∞ –Ω–µ–≥–æ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–∏—Å—å–º–æ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏"
}
```

**Response (–æ—à–∏–±–∫–∞):**

```json
{
    "error": "Email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω"
}
```

### POST /api/auth/reset-password

**Request:**

```json
{
    "token": "a1b2c3d4e5f6...",
    "password": "newPassword123"
}
```

**Response (—É—Å–ø–µ—Ö):**

```json
{
    "message": "–ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω. –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º."
}
```

**Response (–æ—à–∏–±–∫–∞):**

```json
{
    "error": "–ù–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π –∏–ª–∏ –∏—Å—Ç–µ–∫—à–∏–π —Ç–æ–∫–µ–Ω. –ó–∞–ø—Ä–æ—Å–∏—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –∑–∞–Ω–æ–≤–æ."
}
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-app-password
EMAIL_FROM=your-email@gmail.com
EMAIL_FROM_NAME=Lusy Fitness

# –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –≤ –ø–∏—Å—å–º–∞—Ö
NEXTAUTH_URL=http://localhost:3000  # –∏–ª–∏ –≤–∞—à –¥–æ–º–µ–Ω
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è:

-   ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ email (messageId)
-   ‚úÖ –û—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ email
-   ‚úÖ –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
-   ‚úÖ –û—à–∏–±–∫–∏ –ë–î

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏:

```
Email sent: <message-id@gmail.com>
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

–ò—Å–ø–æ–ª—å–∑—É—è `src/lib/email.ts`, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

-   ‚úâÔ∏è –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
-   ‚úâÔ∏è –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
-   ‚úâÔ∏è –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–∫—É–ø–∫–∞—Ö
-   ‚úâÔ∏è –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö
-   ‚úâÔ∏è –†–∞—Å—Å—ã–ª–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
-   ‚úâÔ∏è –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
