# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°

### 1Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Email (5 –º–∏–Ω—É—Ç)

-   [ ] –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
-   [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏:

```env
# Email Configuration
EMAIL_HOST="smtp.gmail.com"
EMAIL_PORT="587"
EMAIL_SECURE="false"
EMAIL_USER="–≤–∞—à-email@gmail.com"
EMAIL_PASSWORD="–≤–∞—à-app-password"
EMAIL_FROM="–≤–∞—à-email@gmail.com"
EMAIL_FROM_NAME="Lusy Fitness"
```

#### –î–ª—è Gmail:

-   [ ] –û—Ç–∫—Ä—ã—Ç—å https://myaccount.google.com/security
-   [ ] –í–∫–ª—é—á–∏—Ç—å "2-Step Verification"
-   [ ] –ü–µ—Ä–µ–π—Ç–∏ –≤ "App passwords"
-   [ ] –°–æ–∑–¥–∞—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è "Mail"
-   [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å 16-–∑–Ω–∞—á–Ω—ã–π –ø–∞—Ä–æ–ª—å
-   [ ] –í—Å—Ç–∞–≤–∏—Ç—å –≤ `EMAIL_PASSWORD` (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)

### 2Ô∏è‚É£ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î (1 –º–∏–Ω—É—Ç–∞)

```bash
npx prisma migrate dev --name add_password_reset_fields
```

-   [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤—ã—à–µ
-   [ ] –î–æ–∂–¥–∞—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è "Migration applied"

### 3Ô∏è‚É£ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä (1 –º–∏–Ω—É—Ç–∞)

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
npm run dev
```

-   [ ] –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä
-   [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞
-   [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2 –º–∏–Ω—É—Ç—ã)

-   [ ] –û—Ç–∫—Ä—ã—Ç—å http://localhost:3000/auth/signin
-   [ ] –ö–ª–∏–∫–Ω—É—Ç—å "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?"
-   [ ] –í–≤–µ—Å—Ç–∏ email —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
-   [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ—è–≤–∏–ª–æ—Å—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
-   [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—á—Ç—É (–≤–∫–ª—é—á–∞—è –ø–∞–ø–∫—É "–°–ø–∞–º")
-   [ ] –û—Ç–∫—Ä—ã—Ç—å –ø–∏—Å—å–º–æ
-   [ ] –ö–ª–∏–∫–Ω—É—Ç—å "–°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å"
-   [ ] –í–≤–µ—Å—Ç–∏ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)
-   [ ] –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–∞—Ä–æ–ª—å
-   [ ] –ö–ª–∏–∫–Ω—É—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å"
-   [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
-   [ ] –í–æ–π—Ç–∏ —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º
-   [ ] ‚úÖ –£—Å–ø–µ—Ö!

## üìä –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ

### Backend:

-   ‚úÖ `src/lib/email.ts` - —É—Ç–∏–ª–∏—Ç—ã email
-   ‚úÖ `src/app/api/auth/forgot-password/route.ts` - API –∑–∞–ø—Ä–æ—Å–∞
-   ‚úÖ `src/app/api/auth/reset-password/route.ts` - API —Å–±—Ä–æ—Å–∞

### Frontend:

-   ‚úÖ `src/app/auth/forgot-password/page.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–ø—Ä–æ—Å–∞
-   ‚úÖ `src/app/auth/reset-password/page.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–±—Ä–æ—Å–∞
-   ‚úÖ `src/components/forms/LoginForm.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:

-   ‚úÖ `prisma/schema.prisma` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è resetToken, resetTokenExpiry

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

-   ‚úÖ `PASSWORD_RESET_README.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
-   ‚úÖ `QUICK_START_PASSWORD_RESET.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
-   ‚úÖ `EMAIL_SETUP.md` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ email
-   ‚úÖ `PASSWORD_RESET_FLOW.md` - —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã
-   ‚úÖ `SUMMARY_PASSWORD_RESET.md` - —Å–≤–æ–¥–∫–∞
-   ‚úÖ `CHECKLIST.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

## ‚ö†Ô∏è –í–∞–∂–Ω–æ –¥–ª—è Production

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:

-   [ ] –ó–∞–º–µ–Ω–∏—Ç—å Gmail –Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å:

    -   SendGrid (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
    -   Mailgun
    -   AWS SES
    -   Postmark

-   [ ] –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ production `.env`:

```env
EMAIL_HOST="smtp.sendgrid.net"
EMAIL_PORT="587"
EMAIL_USER="apikey"
EMAIL_PASSWORD="–≤–∞—à-sendgrid-api-key"
NEXTAUTH_URL="https://–≤–∞—à-–¥–æ–º–µ–Ω.com"
```

-   [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ production:

```bash
npx prisma migrate deploy
```

-   [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DKIM/SPF –¥–ª—è –¥–æ–º–µ–Ω–∞
-   [ ] –î–æ–±–∞–≤–∏—Ç—å rate limiting
-   [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Ç–ø—Ä–∞–≤–∫–∏ email

## üêõ –ü—Ä–æ–±–ª–µ–º—ã?

### Email –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É "–°–ø–∞–º"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ App Password (–Ω–µ –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–æ–ª—å)

### –û—à–∏–±–∫–∞ "Invalid credentials":

-   –î–ª—è Gmail: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ App Password
-   –í–∫–ª—é—á–∏—Ç–µ 2FA –≤ Google –∞–∫–∫–∞—É–Ω—Ç–µ
-   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞—Ä–æ–ª—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤

### –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫:

-   –¢–æ–∫–µ–Ω—ã –¥–µ–π—Å—Ç–≤—É—é—Ç 1 —á–∞—Å
-   –ó–∞–ø—Ä–æ—Å–∏—Ç–µ –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É

### –û—à–∏–±–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å
npx prisma migrate status

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, —Å–±—Ä–æ—Å–∏—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∑–∞–Ω–æ–≤–æ (–û–°–¢–û–†–û–ñ–ù–û!)
npx prisma migrate reset
npx prisma migrate dev
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

-   –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: `QUICK_START_PASSWORD_RESET.md`
-   –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `PASSWORD_RESET_README.md`
-   –ù–∞—Å—Ç—Ä–æ–π–∫–∞ email: `EMAIL_SETUP.md`
-   –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã: `PASSWORD_RESET_FLOW.md`
-   –°–≤–æ–¥–∫–∞: `SUMMARY_PASSWORD_RESET.md`

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç!

### –î–æ—Å—Ç—É–ø–Ω—ã–µ URL:

-   `/auth/signin` - –≤—Ö–æ–¥ (—Å —Å—Å—ã–ª–∫–æ–π "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?")
-   `/auth/forgot-password` - –∑–∞–ø—Ä–æ—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
-   `/auth/reset-password?token=xxx` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è

### API Endpoints:

-   `POST /api/auth/forgot-password` - –∑–∞–ø—Ä–æ—Å —Ç–æ–∫–µ–Ω–∞
-   `POST /api/auth/reset-password` - —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è

–£–¥–∞—á–∏! üöÄ
